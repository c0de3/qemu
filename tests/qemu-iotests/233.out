QA output created by 233

== preparing TLS creds ==
Generating a self signed certificate...
Generating a self signed certificate...
Generating a signed certificate...
Generating a signed certificate...
Generating a signed certificate...

== preparing image ==
Formatting 'TEST_DIR/t.IMGFMT', fmt=IMGFMT size=67108864

== check TLS client to plain server fails ==
option negotiation failed: read failed: Unexpected end-of-file before all bytes were read
qemu-img: Could not open 'driver=nbd,host=127.0.0.1,port=10809,tls-creds=tls0': Denied by server for option 5 (starttls)
server reported: TLS not configured

== check plain client to TLS server fails ==
option negotiation failed: read failed: Unexpected end-of-file before all bytes were read
qemu-img: Could not open 'nbd://localhost:10809': TLS negotiation required before option 8 (structured reply)
server reported: Option 0x8 not permitted before TLS
write failed (error message): Unable to write to socket: Broken pipe

== check TLS works ==
image: nbd://127.0.0.1:10809
file format: nbd
virtual size: 64M (67108864 bytes)
disk size: unavailable

== check TLS with different CA fails ==
option negotiation failed: Verify failed: No certificate was found.
qemu-img: Could not open 'driver=nbd,host=127.0.0.1,port=10809,tls-creds=tls0': The certificate hasn't got a known issuer
*** done
