{"execute": "block-dirty-bitmap-add", "arguments": {"disabled": false, "granularity": 16384, "name": "bitmap-0", "node": "drive0", "persistent": false}}
{"return": {}}
Write 256K to disk at offset 0x0
qemu-img info dump:

image: TEST_IMG
file format: IMGFMT
virtual size: 1.0M (1048576 bytes)
cluster_size: 65536
Format specific information:
    compat: 1.1
    lazy refcounts: false
    refcount bits: 16
    corrupt: false

No bitmap in JSON format output

{"execute": "block-dirty-bitmap-add", "arguments": {"disabled": true, "granularity": 32768, "name": "bitmap-1", "node": "drive0", "persistent": true}}
{"return": {}}
Write 256K to disk at offset 0x100
qemu-img info dump:

image: TEST_IMG
file format: IMGFMT
virtual size: 1.0M (1048576 bytes)
cluster_size: 65536
Format specific information:
    compat: 1.1
    lazy refcounts: false
    bitmaps:
        [0]:
            flags:
            name: bitmap-1
            granularity: 32768
    refcount bits: 16
    corrupt: false

The same bitmaps in JSON format:
[
  {
    "flags": [],
    "granularity": 32768,
    "name": "bitmap-1"
  }
]

{"execute": "block-dirty-bitmap-add", "arguments": {"disabled": false, "granularity": 65536, "name": "bitmap-2", "node": "drive0", "persistent": true}}
{"return": {}}
Write 256K to disk at offset 0x200
qemu-img info dump:

image: TEST_IMG
file format: IMGFMT
virtual size: 1.0M (1048576 bytes)
cluster_size: 65536
Format specific information:
    compat: 1.1
    lazy refcounts: false
    bitmaps:
        [0]:
            flags:
            name: bitmap-1
            granularity: 32768
        [1]:
            flags:
                [0]: auto
            name: bitmap-2
            granularity: 65536
    refcount bits: 16
    corrupt: false

The same bitmaps in JSON format:
[
  {
    "flags": [],
    "granularity": 32768,
    "name": "bitmap-1"
  },
  {
    "flags": [
      "auto"
    ],
    "granularity": 65536,
    "name": "bitmap-2"
  }
]

Checking "in-use" flag...
qemu-img info dump:

image: TEST_IMG
file format: IMGFMT
virtual size: 1.0M (1048576 bytes)
cluster_size: 65536
Format specific information:
    compat: 1.1
    lazy refcounts: false
    bitmaps:
        [0]:
            flags:
                [0]: in-use
            name: bitmap-1
            granularity: 32768
        [1]:
            flags:
                [0]: in-use
                [1]: auto
            name: bitmap-2
            granularity: 65536
    refcount bits: 16
    corrupt: false

The same bitmaps in JSON format:
[
  {
    "flags": [
      "in-use"
    ],
    "granularity": 32768,
    "name": "bitmap-1"
  },
  {
    "flags": [
      "in-use",
      "auto"
    ],
    "granularity": 65536,
    "name": "bitmap-2"
  }
]
