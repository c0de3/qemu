# -*- Mode: Python -*-

##
# == QAPI 9p definitions
##

# QAPI common definitions
{ 'include': 'common.json' }

##
# @fs9p_set_io_throttle:
#
# Change I/O limits for a 9p/fsdev device.
#
# Since QEMU 2.9, I/0 limits can be enabled on each  fsdev(9pfs) device
#
# I/O limits can be disabled by setting all of them to 0.
#
# Returns: Nothing on success
#          If @device is not a valid 9p device, DeviceNotFound
#
# Since: 2:10
#
# Example:
#
# -> { "execute": "fs9p_set_io_throttle",
#      "arguments": { "device": "ide0-1-0",
#                     "bps": 1000000,
#                     "bps_rd": 0,
#                     "bps_wr": 0,
#                     "iops": 0,
#                     "iops_rd": 0,
#                     "iops_wr": 0,
#                     "bps_max": 8000000,
#                     "bps_rd_max": 0,
#                     "bps_wr_max": 0,
#                     "iops_max": 0,
#                     "iops_rd_max": 0,
#                     "iops_wr_max": 0,
#                     "bps_max_length": 60,
#                     "iops_size": 0 } }
# <- { "returns": {} }
##
{ 'command': 'fs9p_set_io_throttle', 'boxed': true,
  'data': 'FS9PIOThrottle' }
##
# @FS9PIOThrottle:
#
# A set of parameters describing block
#
# @device: Block device name
#
# @bps: total throughput limit in bytes per second
#
# @bps_rd: read throughput limit in bytes per second
#
# @bps_wr: write throughput limit in bytes per second
#
# @iops: total I/O operations per second
#
# @iops_rd: read I/O operations per second
#
# @iops_wr: write I/O operations per second
#
# @bps_max: total throughput limit during bursts,
#                     in bytes (Since 1.7)
#
# @bps_rd_max: read throughput limit during bursts,
#                        in bytes (Since 1.7)
#
# @bps_wr_max: write throughput limit during bursts,
#                        in bytes (Since 1.7)
#
# @iops_max: total I/O operations per second during bursts,
#                      in bytes (Since 1.7)
#
# @iops_rd_max: read I/O operations per second during bursts,
#                         in bytes (Since 1.7)
#
# @iops_wr_max: write I/O operations per second during bursts,
#                         in bytes (Since 1.7)
#
# @bps_max_length: maximum length of the @bps_max burst
#                            period, in seconds. It must only
#                            be set if @bps_max is set as well.
#                            Defaults to 1. (Since 2.6)
#
# @bps_rd_max_length: maximum length of the @bps_rd_max
#                               burst period, in seconds. It must only
#                               be set if @bps_rd_max is set as well.
#                               Defaults to 1. (Since 2.6)
#
# @bps_wr_max_length: maximum length of the @bps_wr_max
#                               burst period, in seconds. It must only
#                               be set if @bps_wr_max is set as well.
#                               Defaults to 1. (Since 2.6)
#
# @iops_max_length: maximum length of the @iops burst
#                             period, in seconds. It must only
#                             be set if @iops_max is set as well.
#                             Defaults to 1. (Since 2.6)
#
# @iops_rd_max_length: maximum length of the @iops_rd_max
#                                burst period, in seconds. It must only
#                                be set if @iops_rd_max is set as well.
#                                Defaults to 1. (Since 2.6)
#
# @iops_wr_max_length: maximum length of the @iops_wr_max
#                                burst period, in seconds. It must only
#                                be set if @iops_wr_max is set as well.
#                                Defaults to 1. (Since 2.6)
#
# @iops_size: an I/O size in bytes (Since 1.7)
#
#
# Since: 2.10
##
{ 'struct': 'FS9PIOThrottle',
  'data': { '*device': 'str', 'bps': 'int', 'bps_rd': 'int',
            'bps_wr': 'int', 'iops': 'int', 'iops_rd': 'int', 'iops_wr': 'int',
            '*bps_max': 'int', '*bps_rd_max': 'int',
            '*bps_wr_max': 'int', '*iops_max': 'int',
            '*iops_rd_max': 'int', '*iops_wr_max': 'int',
            '*bps_max_length': 'int', '*bps_rd_max_length': 'int',
            '*bps_wr_max_length': 'int', '*iops_max_length': 'int',
            '*iops_rd_max_length': 'int', '*iops_wr_max_length': 'int',
            '*iops_size': 'int' } }

##
# @query-9pfs-io-throttle:
#
# Return a list of information about each iothread
#
# Returns: @FS9PIOIOThrottle
#
# Since: 2.10
#
# Example:
#
# -> { "Execute": "query-9pfs-io-throttle" }
# <- { "returns" : [
#          {
#             "device": "ide0-hd0",
#              "bps":1000000,
#              "bps_rd":0,
#              "bps_wr":0,
#              "iops":1000000,
#              "iops_rd":0,
#              "iops_wr":0,
#              "bps_max": 8000000,
#              "bps_rd_max": 0,
#              "bps_wr_max": 0,
#              "iops_max": 0,
#              "iops_rd_max": 0,
#              "iops_wr_max": 0,
#              "bps_max_length": 0,
#              "bps_rd_max_length": 0,
#              "bps_wr_max_length": 0,
#              "iops_max_length": 0,
#              "iops_rd_max_length": 0,
#              "iops_wr_max_length": 0,
#              "iops_size": 0,
#            }
#          ]
#      }
#
##
{ 'command': 'query-9pfs-io-throttle', 'returns': [ 'FS9PIOThrottle' ] }

