PVPANIC DEVICE
==============

pvpanic device is a simulated ISA/SysBus device, through which a guest
panic event is sent to qemu, and a QMP event is generated. This allows
management apps (e.g. libvirt) to be notified and respond to the event.

The ma:wqnagement app has the option of waiting for GUEST_PANICKED events,
and/or polling for guest-panicked RunState, to learn when the pvpanic
device has fired a panic event.

When pvpanic device is implemented as a ISA device, it supports IOPORT
mode. Since QEMU v3.2 pvpanic also supports MMIO mode, it will be 
implemented as a SYSBUS device.

ISA Interface
-------------

pvpanic exposes a single I/O port, by default 0x505. On read, the bits
recognized by the device are set. Software should ignore bits it doesn't
recognize. On write, the bits not recognized by the device are ignored.
Software should set only bits both itself and the device recognize.
Currently, only bit 0 is recognized, setting it indicates a guest panic
has happened.

SYSBUS Interface
----------------

The SYSBUS interface is similar to the ISA interface except that it uses
MMIO. For example, the arm virt machine could put the pvpanic device at
[0x9070000, 0x9070001] and currently only the first byte is used.


ACPI Interface
--------------

pvpanic device is defined with ACPI ID "QEMU0001". Custom methods:

RDPT:       To determine whether guest panic notification is supported.
Arguments:  None
Return:     Returns a byte, bit 0 set to indicate guest panic
            notification is supported. Other bits are reserved and
            should be ignored.

WRPT:       To send a guest panic event
Arguments:  Arg0 is a byte, with bit 0 set to indicate guest panic has
            happened. Other bits are reserved and should be cleared.
Return:     None

The ACPI device will automatically refer to the right port in case it
is modified.
